<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no,width=device-width">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="screen-orientation" content="portrait">
    <meta name="x5-orientation" content="portrait">
    <meta content="telephone=no" name="format-detection">
    <title>支付中心</title>
    <style>
        body,html{height:100%;margin:0;padding:0;    overflow: hidden;}
        .wxtipbox{width:276px;height:117px;background-image:url(/mobile/www_ipad/img/publicbg/wxbox.png);position:fixed;text-align:center;top:50px;right:65px;background-size:100%;padding: 40px 0;color:#f0f59a;font-size:14px;    font-weight: bold;    box-sizing: border-box;z-index:9}
        .wxtipbox:before{width:102px;height:71px;background-image:url(/mobile/www/img/publicbg/wxjt.png);position:absolute;top:-40px;right:-40px;background-size:100%;content:'';display:block;}
        .wxtipbox-bg{width:100%;height:100%;background-color:rgba(0,0,0,0.8);position:absolute;top:0px;z-index:5}
        .button.button-block{padding:5px 10px;border-radius:5px;    background: #1AB554;color:#fff;width:150px;text-align:center}
    </style>

</head>
<body>
    <div id="wxtipbox" class="wxtipbox" style="display:none">请使用浏览器打开本连接<br />完成支付,谢谢!</div>
    <div id="wxtipboxbg" class="wxtipbox-bg" style="display:none"></div>
    <div>
        <p>将自动跳转至支付宝</p>
        <p>如果浏览器没有自动跳转功能,请点击以下按钮</p>
        <a onclick="goPayFun()">
            <div class="button button-block">支付宝支付</div>
        </a>
    </div>
    <script>
        if (typeof (window.location.href.split('?payid')[1]) == 'undefined') {
            console.log('无数据');
            alert('1')
        } else {
            PayId = window.location.href.split('?payid')[1].split('endpayid')[0];
            console.log(PayId);
            var payUrl = '/pay/Alipay/default.aspx?OrderId=' + PayId;
            function goPayFun() {
                console.log(payUrl);
                window.location.href = payUrl
            }
            ThisWX = false;
            var ua = navigator.userAgent.toLowerCase();//获取判断用的对象
            if (ua.match(/MicroMessenger/i) == "micromessenger") {
                //微信
                document.getElementById("wxtipbox").style.display = "block";
                document.getElementById("wxtipboxbg").style.display = "block";
            } else {
                //跳转
                goPayFun()
            }
        }


    </script>
</body>
</html>
